# Sample package configuration for testing
# This contains a subset of packages to verify makepkg functionality
packages:
  - name: zlib
    url: https://zlib.net/zlib-1.3.1.tar.gz
    build: |
      ./configure --prefix=/usr --static
      make AR="${AR:-ar} rc" ARFLAGS=""
    install: |
      make install DESTDIR=$SYS_ROOT AR="${AR:-ar} rc" ARFLAGS=""

  - name: curl
    url: https://curl.se/download/curl-8.5.0.tar.gz
    build: |
      ./configure --prefix=/usr --enable-static --disable-shared --with-zlib \
        --without-ssl --without-libpsl --without-libidn2 --disable-ldap --disable-rtsp --disable-manual
      make curl_LDFLAGS="-all-static"
    install: |
      make install DESTDIR=$SYS_ROOT
    depends_on:
      - zlib

  - name: file
    url: http://ftp.astron.com/pub/file/file-5.45.tar.gz
    build: |
      ./configure --prefix=/usr --enable-static --disable-shared --disable-libseccomp
      touch aclocal.m4 configure Makefile.in src/Makefile.in magic/Makefile.in config.h.in
      make -C src magic.h libmagic.la
      make -C src file LDFLAGS="-all-static"
    install: |
      make -C src install DESTDIR=$SYS_ROOT
    depends_on:
      - zlib
